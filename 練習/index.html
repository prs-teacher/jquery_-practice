<!doctype html>
<html lang="ja">
<head>
	<meta charset="UTF-8" />
	<title>HierSelectテスト</title>
	<!-- jQueryをCDNを使って読み込む -->
	<script src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
</head>

<body>
	<form action="" method="post">
	
		<p>国を選択して下さい</p>
		<select name="country">
			<option value="Japan" selected="selected" class="msg">1番目の要素を選択して下さい</option>
			<option value="Japan" class="japan">日本</option>
			<option value="America" class="America">アメリカ</option>
			<option value="Australia" class="Australia">オーストラリア</option>
		</select>
		
		<p>都市を選択して下さい</p>
		<select name="city">
			<option value="Japan" selected="selected" class="msg">都市を選択して下さい</option>
			<option value="Tokyo" class="japan">東京</option>
			<option value="Kyoto" class="japan">京都</option>
			<option value="Osaka" class="japan">大阪</option>
			<option value="NY" class="America">ニューヨーク</option>
			<option value="LA" class="America">ロサンゼルス</option>
			<option value="Sydney" class="Australia">シドニー</option>
		</select>
		
	</form>
	
	<script>
		//この中にドロップダウンリストを連動させるための
    //jQueryのコードを記述していきます。
    $(function() {
	
	// 国名が変更されたら発動
	$('select[name="country"]').change(function() {
		
		// 選択されている国のクラス名を取得
		var countyName = $('select[name="country"] option:selected').attr("class");
		console.log(countyName);
		
		// 都市名の要素数を取得
    var count = $('select[name="city"]').children().length;
    console.log(count);
		
		// 都市名の要素数分、for文で回す
		for (var i=0; i<count; i++) {
			
      var city = $('select[name="city"] option:eq(' + i + ')');
      console.log(city);
			if(city.attr("class") === countyName) {
        // 選択した国と同じクラス名だった場合
        
        city.show();
      }else {
        // 選択した国とクラス名が違った場合
        
        if(city.attr("class") === "msg") {
          // 「都市名を選択して下さい」という要素だった場合
          
            city.show();  //「都市名を選択して下さい」を表示させる
            city.prop('selected',true);  //「都市名を選択して下さい」を強制的に選択されている状態にする
        } else {
          // 「都市名を選択して下さい」という要素でなかった場合
          
          city.hide();
        }
      }

			
		}
	})
})
	</script>
</body>
</html>